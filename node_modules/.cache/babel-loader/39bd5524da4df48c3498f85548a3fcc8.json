{"ast":null,"code":"var _jsxFileName = \"/Users/samuelhsu/Documents/GitHub/spootify/src/components/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport \"./Dashboard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Dashboard() {\n  _s();\n\n  var [token, setToken] = useState(\"\");\n  var [data, setData] = useState([]);\n  var [auth, setAuth] = useState(\"\");\n  var [player, setPlayer] = useState(false);\n  var count = 0;\n  useEffect(() => {\n    console.log(\"The URL of this page is: \" + window.location.href);\n    var url = window.location.href;\n    var accessToken = window.location.href.split('code=').pop();\n    fetch(\"http://localhost:443/auth\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      },\n      body: JSON.stringify({\n        authKey: accessToken,\n        uri: url\n      })\n    }).then(res => res.json()).then(res => {\n      //console.log(res);\n      //console.log(res.access_token);\n      setToken(res.access_token);\n    });\n  }, []);\n\n  function refresh() {\n    fetch(\"http://localhost:443/login\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    }).then(data => data.json()).then(data => {\n      console.log(data);\n      setAuth(data);\n      window.location.href = data;\n    });\n  }\n\n  async function topTracksL() {\n    try {\n      await fetch(\"https://api.spotify.com/v1/me/top/tracks?time_range=long_term\", {\n        method: \"GET\",\n        headers: {\n          'Authorization': 'Bearer ' + token,\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        }\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        setData(res.items);\n      });\n    } catch (err) {\n      console.log(\"Please refresh\");\n    }\n  }\n\n  async function topTracksM() {\n    await fetch(\"https://api.spotify.com/v1/me/top/tracks?time_range=medium_term\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': 'Bearer ' + token,\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      //console.log(res);\n      setData(res.items);\n    });\n  }\n\n  async function topTracksS() {\n    await fetch(\"https://api.spotify.com/v1/me/top/tracks?time_range=short_term\", {\n      method: \"GET\",\n      headers: {\n        'Authorization': 'Bearer ' + token,\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    }).then(res => res.json()).then(res => {\n      //console.log(res);\n      setData(res.items);\n    });\n  }\n\n  async function playerStarts() {\n    setPlayer(true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: refresh,\n      className: \"spootify\",\n      children: \"Spootify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        onClick: topTracksS,\n        children: \"last month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        onClick: topTracksM,\n        children: \"last 6 months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        onClick: topTracksL,\n        children: \"all time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), console.log(auth), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: data ? data.map((track, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tracks\",\n          children: [i + 1, \". \", /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: playerStarts,\n            children: /*#__PURE__*/_jsxDEV(\"track-name\", {\n              children: track === null || track === void 0 ? void 0 : track.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 62\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 36\n          }, this), \"}\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }, this)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)) : \"Unable to load data. Please press Spootify to continue.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Dashboard, \"PTnwSMqTNPJ++vTQe1BnSzWOkog=\");\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/samuelhsu/Documents/GitHub/spootify/src/components/Dashboard.js"],"names":["React","useEffect","useState","Dashboard","token","setToken","data","setData","auth","setAuth","player","setPlayer","count","console","log","window","location","href","url","accessToken","split","pop","fetch","method","headers","Accept","body","JSON","stringify","authKey","uri","then","res","json","access_token","refresh","topTracksL","items","err","topTracksM","topTracksS","playerStarts","map","track","i","name"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport \"./Dashboard.css\";\n\nfunction Dashboard() {\n    var [token, setToken] = useState(\"\");\n    var [data, setData] = useState([]);\n    var [auth, setAuth] = useState(\"\");\n    var [player, setPlayer] = useState(false);\n    \n    var count = 0;\n\n    useEffect(() => {\n        console.log(\"The URL of this page is: \" + window.location.href);\n        var url = window.location.href;\n        var accessToken = window.location.href.split('code=').pop();  \n\n        fetch(\"http://localhost:443/auth\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n            },\n            body: JSON.stringify({\n            authKey: accessToken,\n            uri: url,\n            })\n        })\n        .then(res => res.json()) \n        .then(res => {\n            //console.log(res);\n            //console.log(res.access_token);\n            setToken(res.access_token);\n        })\n    }, []);\n\n    function refresh() {\n        fetch(\"http://localhost:443/login\", {\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n        }\n        })\n        .then(data => data.json()) \n        .then(data => {\n            console.log(data);\n            setAuth(data);\n            window.location.href = data;\n        })\n    } \n\n    async function topTracksL() {\n        try {\n            await fetch (\"https://api.spotify.com/v1/me/top/tracks?time_range=long_term\", {\n            method: \"GET\",\n            headers: {\n                'Authorization': 'Bearer ' + token,\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n            }\n        })\n        .then (res => res.json())\n        .then (res => {\n            console.log(res);\n            setData(res.items);\n        })\n          }\n          catch(err) {\n            console.log(\"Please refresh\");\n          }\n\n    }\n\n    async function topTracksM() {\n        await fetch (\"https://api.spotify.com/v1/me/top/tracks?time_range=medium_term\", {\n            method: \"GET\",\n            headers: {\n                'Authorization': 'Bearer ' + token,\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n            }\n        })\n        .then (res => res.json())\n        .then (res => {\n            //console.log(res);\n            setData(res.items);\n        })\n    }\n\n    async function topTracksS() {\n        await fetch (\"https://api.spotify.com/v1/me/top/tracks?time_range=short_term\", {\n            method: \"GET\",\n            headers: {\n                'Authorization': 'Bearer ' + token,\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n            }\n        })\n        .then (res => res.json())\n        .then (res => {\n            //console.log(res);\n            setData(res.items);\n        })\n    }\n\n    async function playerStarts() {\n        setPlayer(true);\n    }\n\n    return (\n      <div className=\"Dashboard\">\n          <div onClick={refresh} className=\"spootify\">Spootify</div>\n                <div className=\"container\">\n                    <div className=\"btns\" onClick={topTracksS}>last month</div>\n                    <div className=\"btns\" onClick={topTracksM}>last 6 months</div>\n                    <div className=\"btns\" onClick={topTracksL}>all time</div>\n                </div>\n               {console.log(auth)} \n              <ul>\n                 { data ? data.map((track, i)=> (\n                    <li key={i}>\n                        <div className=\"tracks\">\n                            \n                            {i+1}. <a onClick={playerStarts}><track-name>{track?.name}</track-name></a>}\n                        </div>\n                    </li> \n                )) : \"Unable to load data. Please press Spootify to continue.\"}\n              </ul>\n              <br></br>\n              <br></br>\n      </div>\n  )\n}\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}